{
  "id": "AzureFunctionsForPowershell",
  "name": "Azure Functions for Powershell",
  "category": "Build",
  "defaultHostedQueue": "Hosted Windows 2019 with VS2019",
  "iconTaskId": "501DD25D-1785-43E4-B4E5-A5C78CCC0573",
  "description": "Build and package a Powershell based Azure Functions application to be deployed on Azure Functions.",
  "template": {
    "process": {
      "type": 1,
      "phases": [
        {
          "steps": [
            {
              "environment": {},
              "enabled": true,
              "continueOnError": false,
              "alwaysRun": false,
              "displayName": "dotnet build",
              "timeoutInMinutes": 0,
              "condition": "succeeded()",
              "task": {
                "id": "e213ff0f-5d5c-4791-802d-52ea3e7be1f1",
                "versionSpec": "2.*",
                "definitionType": "task"
              },
              "inputs": {
                "targetType": "inline",
                "filePath": "",
                "arguments": "",
                "script": "if (Test-Path \"extensions.csproj\") {\n     dotnet build extensions.csproj --output ./bin\n}",
                "errorActionPreference": "stop",
                "failOnStderr": "false",
                "ignoreLASTEXITCODE": "false",
                "pwsh": "false",
                "workingDirectory": ""
              }
            },
            {
              "environment": {},
              "enabled": true,
              "continueOnError": false,
              "alwaysRun": false,
              "displayName": "Archive files",
              "timeoutInMinutes": 0,
              "condition": "succeeded()",
              "task": {
                "id": "d8b84976-e99a-4b86-b885-4849694435b0",
                "versionSpec": "2.*",
                "definitionType": "task"
              },
              "inputs": {
                "rootFolderOrFile": "$(System.DefaultWorkingDirectory)",
                "includeRootFolder": "false",
                "archiveType": "zip",
                "tarCompression": "gz",
                "archiveFile": "$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip",
                "replaceExistingArchive": "true",
                "verbose": "false",
                "quiet": "false"
              }
            },
            {
              "environment": {},
              "enabled": true,
              "continueOnError": false,
              "alwaysRun": false,
              "displayName": "Publish Artifact: drop",
              "timeoutInMinutes": 0,
              "condition": "succeeded()",
              "task": {
                "id": "2ff763a7-ce83-4e1f-bc89-0ae63477cebe",
                "versionSpec": "1.*",
                "definitionType": "task"
              },
              "inputs": {
                "PathtoPublish": "$(Build.ArtifactStagingDirectory)",
                "ArtifactName": "drop",
                "ArtifactType": "Container",
                "TargetPath": "",
                "Parallel": "false",
                "ParallelCount": "8"
              }
            }
          ]
        }
      ]
    },
    "options": [
      {
        "enabled": true,
        "definition": {
          "id": "5d58cc01-7c75-450c-be18-a388ddb129ec"
        },
        "inputs": {}
      }
    ],
    "variables": {
      "system.debug": {
        "value": "false",
        "allowOverride": true
      }
    },
    "properties": {},
    "tags": [],
    "triggers": [],
    "processParameters": {}
  }
}
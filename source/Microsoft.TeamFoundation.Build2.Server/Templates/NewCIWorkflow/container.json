{
    "id": "container",
    "name": "Docker container",
    "category": "Build",
    "defaultHostedQueue": "Azure Pipelines",
    "description": "Build a Docker image and push it to a container registry.",
    "iconTaskId": "E28912F1-0114-4464-802A-A3A35437FD16",
    "template": {
        "buildNumberFormat": "$(date:yyyyMMdd)$(rev:.r)",
        "process": {
            "type": 1,
            "phases": [
                {
                    "steps": [
                        {
                            "enabled": true,
                            "continueOnError": false,
                            "alwaysRun": false,
                            "displayName": "Build an image",
                            "timeoutInMinutes": 0,
                            "task": {
                                "id": "E28912F1-0114-4464-802A-A3A35437FD16",
                                "versionSpec": "0.*",
                                "definitionType": "task"
                            },
                            "inputs": {
                                "dockerRegistryEndpoint": "",
                                "action": "Build an image",
                                "dockerFile": "**/Dockerfile",
                                "buildArguments": "",
                                "defaultContext": "true",
                                "context": "",
                                "imageName": "$(Build.Repository.Name):$(Build.BuildId)",
                                "qualifyImageName": "true",
                                "additionalImageTags": "",
                                "includeSourceTags": "false",
                                "includeLatestTag": "false",
                                "imageDigestFile": "",
                                "containerName": "",
                                "ports": "",
                                "volumes": "",
                                "envVars": "",
                                "workDir": "",
                                "entrypoint": "",
                                "containerCommand": "",
                                "detached": "true",
                                "restartPolicy": "no",
                                "restartMaxRetries": "",
                                "customCommand": "",
                                "dockerHostEndpoint": "",
                                "cwd": "$(System.DefaultWorkingDirectory)"
                            }
                        },
                        {
                            "enabled": true,
                            "continueOnError": false,
                            "alwaysRun": false,
                            "displayName": "Push an image",
                            "timeoutInMinutes": 0,
                            "task": {
                                "id": "E28912F1-0114-4464-802A-A3A35437FD16",
                                "versionSpec": "0.*",
                                "definitionType": "task"
                            },
                            "inputs": {
                                "dockerRegistryEndpoint": "",
                                "action": "Push an image",
                                "dockerFile": "**/Dockerfile",
                                "buildArguments": "",
                                "defaultContext": "true",
                                "context": "",
                                "imageName": "$(Build.Repository.Name):$(Build.BuildId)",
                                "qualifyImageName": "true",
                                "additionalImageTags": "",
                                "includeSourceTags": "false",
                                "includeLatestTag": "false",
                                "imageDigestFile": "",
                                "containerName": "",
                                "ports": "",
                                "volumes": "",
                                "envVars": "",
                                "workDir": "",
                                "entrypoint": "",
                                "containerCommand": "",
                                "detached": "true",
                                "restartPolicy": "no",
                                "restartMaxRetries": "",
                                "customCommand": "",
                                "dockerHostEndpoint": "",
                                "cwd": "$(System.DefaultWorkingDirectory)"
                            }
                        }
                    ]
                }
            ]
        },
        "options": [
            {
                "definition": {
                    "id": "5D58CC01-7C75-450C-BE18-A388DDB129EC"
                },
                "enabled": true,
                "inputs": {
                }
            }
        ],
        "variables": {
            "system.debug": {
                "value": "false",
                "allowOverride": true
            }
        },
        "triggers": []
    }
}
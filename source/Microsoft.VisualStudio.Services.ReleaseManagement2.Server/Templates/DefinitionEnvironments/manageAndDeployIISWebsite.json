{
  "id": "789832AA-952A-433C-935E-2529E68A8F54",
  "name": "IIS website deployment",
  "category": "Deployment",
  "description": "Deployment Group: Deploy an ASP.NET or ASP.NET Core web application to an IIS website.",
  "iconTaskId": "1B467810-6725-4B6D-ACCD-886174C09BBA",
  "environment": {
    "name": "Production",
    "rank": 1,
    "deployPhases": [
      {
        "name": "IIS Deployment",
        "rank": 1,
        "phaseType": 4,
        "controlOptions": {},
        "deploymentInput": {
          "deploymentHealthOption": "AllTargetsInParallel",
          "healthPercent": 0,
          "tags": []
        },
        "workflowTasks": [
          {
            "taskId": "1b2aec60-dc49-11e6-9b76-63056e018cac",
            "version": "0.*",
            "Name": "IIS Web App Manage",
            "inputs": {
              "IISDeploymentType": "$(Parameters.IISDeploymentType)",
              "ActionIISWebsite": "$(Parameters.ActionIISWebsite)",
              "StartStopWebsiteName": "$(Parameters.WebsiteName)",
              "AddBinding": "$(Parameters.AddBinding)",
              "WebsiteName": "$(Parameters.WebsiteName)",
              "Bindings": "$(Parameters.Bindings)",
              "ParentWebsiteNameForVD": "$(Parameters.WebsiteName)",
              "VirtualPathForVD": "$(Parameters.VirtualPathForApplication)",
              "ParentWebsiteNameForApplication": "$(Parameters.WebsiteName)",
              "VirtualPathForApplication": "$(Parameters.VirtualPathForApplication)",
              "AppPoolName": "$(Parameters.AppPoolName)"
            },
            "Enabled": true,
            "AlwaysRun": false,
            "ContinueOnError": false
          },
          {
            "taskId": "1B467810-6725-4B6D-ACCD-886174C09BBA",
            "version": "0.*",
            "Name": "IIS Web App Deploy",
            "inputs": {
              "WebSiteName": "$(Parameters.WebsiteName)",
              "Package": "$(System.DefaultWorkingDirectory)\\**\\*.zip",
              "TakeAppOfflineFlag": true,
              "XmlVariableSubstitution": true
            },
            "Enabled": true,
            "AlwaysRun": false,
            "ContinueOnError": false
          }
        ]
      }
    ],
    "deployStep": {
      "tasks": []
    },
    "preDeployApprovals": {
      "approvals": [
        {
          "isAutomated": true,
          "rank": 1
        }
      ],
      "approvalOptions": null
    },
    "postDeployApprovals": {
      "approvals": [
        {
          "isAutomated": true,
          "rank": 1
        }
      ],
      "approvalOptions": null
    },
    "runOptions": {},
    "executionPolicy": {
        "concurrencyCount": 1,
        "queueDepthCount": 0
    },
    "processParameters": {
      "inputs": [
        {
          "options": {
            "IISWebsite": "IIS Website",
            "IISWebApplication": "IIS Web Application",
            "IISVirtualDirectory": "IIS Virtual Directory",
            "IISApplicationPool": "IIS Application Pool"
          },
          "properties": {},
          "name": "IISDeploymentType",
          "label": "{IISDeploymentTypeLabel}",
          "defaultValue": "IISWebsite",
          "required": true,
          "type": "pickList",
          "helpMarkDown": "{IISDeploymentTypeMarkdown}",
          "groupName": ""
        },
        {
          "options": {
            "CreateOrUpdateWebsite": "Create Or Update",
            "StartWebsite": "Start",
            "StopWebsite": "Stop"
          },
          "properties": {},
          "name": "ActionIISWebsite",
          "label": "{ActionIISWebsiteLabel}",
          "defaultValue": "CreateOrUpdateWebsite",
          "required": true,
          "type": "pickList",
          "helpMarkDown": "{ActionIISWebsiteMarkdown}",
          "visibleRule": "IISDeploymentType = IISWebsite",
          "groupName": ""
        },
        {
          "options": {},
          "properties": {},
          "name": "WebsiteName",
          "label": "{WebsiteNameLabel}",
          "defaultValue": "Default Web Site",
          "required": true,
          "type": "string",
          "helpMarkDown": "{WebsiteNameMarkdown}",
          "groupName": ""
        },
        {
          "options": {},
          "properties": {},
          "name": "AddBinding",
          "label": "{AddBindingLabel}",
          "defaultValue": "True",
          "type": "boolean",
          "helpMarkDown": "{AddBindingMarkdown}",
          "visibleRule": "IISDeploymentType = IISWebsite && ActionIISWebsite = CreateOrUpdateWebsite",
          "groupName": ""
        },
        {
          "options": {},
          "properties": {
            "resizable": "true",
            "editorExtension": "ms.vss-services-azure.iis-multiple-binding",
            "displayFormat": "{{#bindings}}{{protocol}}/{{ipAddress}}:{{port}}:{{hostname}}\n{{/bindings}}"
          },
          "name": "Bindings",
          "label": "{BindingsLabel}",
          "defaultValue": "{\"bindings\":[{\"protocol\":\"http\",\"ipAddress\":\"All Unassigned\",\"port\":\"80\",\"hostname\":\"\",\"sslThumbprint\":\"\",\"sniFlag\":false}]}",
          "required": true,
          "type": "multiLine",
          "helpMarkDown": "{BindingsMarkdown}",
          "visibleRule": "IISDeploymentType = IISWebsite && ActionIISWebsite = CreateOrUpdateWebsite && AddBinding = true",
          "groupName": ""
        },
        {
          "options": {},
          "properties": {},
          "name": "AppPoolName",
          "label": "{AppPoolNameLabel}",
          "defaultValue": "",
          "required": true,
          "type": "string",
          "helpMarkDown": "{AppPoolNameMarkdown}",
          "visibleRule": "IISDeploymentType = IISApplicationPool",
          "groupName": ""
        },
        {
          "options": {},
          "properties": {},
          "name": "VirtualPathForApplication",
          "label": "{VirtualPathForApplicationLabel}",
          "defaultValue": "",
          "required": true,
          "type": "string",
          "helpMarkDown": "{VirtualPathForApplicationMarkdown}",
          "visibleRule": "IISDeploymentType = IISWebApplication || IISDeploymentType = IISVirtualDirectory",
          "groupName": ""
        }
      ]
    },
    "variables": {}
  }
}